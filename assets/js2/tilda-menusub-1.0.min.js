function t_menusub_init(u){$("#rec"+u+" .t-menusub").each(function(){var t=$(this).attr("data-submenu-hook");if(void 0!==t&&""!=t){var e=$('a[href="'+t+'"]');e.addClass("t-menusub__target-link"),e.attr("data-tooltip-menu-id",u),t_menusub_add_arrow(u,e,t),t_menusub_set_up_menu(u,e,t),t_menusub_highlight()}}),$(window).bind("orientationchange resize",function(){$("#rec"+u+" .t-menusub").each(function(){t_menusub_hide_submenu($(this).find(".t-menusub__menu"))})})}function t_menusub_set_up_menu(t,e,u){console.log("Setup");var s=$("#rec"+t+' .t-menusub[data-submenu-hook="'+u+'"] .t-menusub__menu');isMobile?t_menusub_set_up_menu_mobile(t,e,s):t_menusub_set_up_menu_desktop(t,e,s,u),$(window).bind("scroll",t_throttle(function(){isMobile||s.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(s)},300))}function t_menusub_set_up_menu_mobile(s,t,n){var e=$("#rec"+s+" .t-menusub").attr("data-submenu-margin");t.on("click",function(t){(980<$(window).width()&&$("#rec"+s+" .t-menusub__menu").each(function(){t_menusub_hide_submenu($(this))}),n.hasClass("t-menusub__menu_show"))?t_menusub_hide_submenu(n):t_menusub_show($(this),n,e);t.preventDefault()}),$(document).click(function(t){var e=$(t.target).hasClass("t-menusub__menu")||0<$(t.target).parents(".t-menusub__menu").length,u=$(t.target).hasClass("t-menusub__target-link")||0<$(t.target).parents(".t-menusub__target-link").length;u&&($(t.target).hasClass("t-menusub__target-link")?$(t.target):$(t.target).parents(".t-menusub__target-link")).attr("data-tooltip-menu-id")!=s&&n.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(n);e||u||!n.hasClass("t-menusub__menu_show")||t_menusub_hide_submenu(n)})}function t_menusub_set_up_menu_desktop(t,e,u,s){var n,_=$("#rec"+t+" .t-menusub").attr("data-submenu-margin");e.add(u).on("mouseover",function(){$(this).hasClass("t-menusub__menu")&&!$(this).hasClass("t-menusub__menu_show")||(clearTimeout(n),$(this).hasClass("t-menusub__menu")&&u.hasClass("t-menusub__menu_show")||t_menusub_show($(this),u,_))}),e.add(u).on("mouseout",function(){n=setTimeout(function(){t_menusub_hide_submenu(u)},300)}),e.on("click auxclick",function(t){t.preventDefault()})}function t_menusub_show(t,e,u){var s=e.outerHeight(),n=e.outerWidth(),_=t.height(),a=t.width(),i=$(window).height(),m=$(window).width(),o=$(window).scrollTop(),b=t.position().left;void 0!==u&&""!=u&&(u=1*u.replace("px",""),u+=10);var h=t.position().top+_+u,l=b;o+i<h+s?(h=Math.max(h-s-_-2*u,o),e.removeClass("t-menusub__menu_bottom").addClass("t-menusub__menu_top")):e.removeClass("t-menusub__menu_top").addClass("t-menusub__menu_bottom"),$(window).width()<=980&&(h=0),l+n/2<m?(l+=(a-n)/2)<0&&(l=10):l=m-n-10,e.css({display:"block",left:l,top:h}),e.offsetHeight,e.addClass("t-menusub__menu_show"),t.addClass("t-menusub__target-link_active")}function t_menusub_hide_submenu(t){t.css({display:"",left:"",top:""}),t.removeClass("t-menusub__menu_show"),$(".t-menusub__target-link_active").removeClass("t-menusub__target-link_active")}function t_menusub_add_arrow(t,e,u){var s=$("#rec"+t+' .t-menusub[data-submenu-hook="'+u+'"]').attr("data-add-submenu-arrow");void 0!==s&&""!=s&&e.each(function(){var t=$(this).height();$(this).append('<div class="t-menusub__arrow" style="height: '+t+'px;"></div>')})}function t_menusub_highlight(){var t=window.location.href,e=window.location.pathname;"/"==t.substr(t.length-1)&&(t=t.slice(0,-1)),"/"==e.substr(e.length-1)&&(e=e.slice(0,-1)),"/"==e.charAt(0)&&(e=e.slice(1)),""==e&&(e="/"),$('.t-menusub__list-item a[href="'+t+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+t+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'/"]').addClass("t-active")}
